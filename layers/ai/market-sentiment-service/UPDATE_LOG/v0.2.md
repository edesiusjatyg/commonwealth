# Update Log v0.2

**Date**: December 28, 2025  
**Author**: System Update

## Changes Summary

### 1. Gemini Model Update
**What was changed:**
- Updated to use `gemini-2.5-flash` model
- Added JSON response format configuration for better reliability

**Why:**
- Using the latest Gemini 2.5 Flash model for improved performance
- Added `response_mime_type: "application/json"` to ensure proper JSON formatting
- Improved JSON parsing to handle edge cases

**Files affected:**
- `app/config.py` - Model name set to `gemini-2.5-flash`
- `services/gemini_client.py` - Added response_mime_type configuration and improved JSON extraction

### 2. Twitter Integration Removed
**What was removed:**
- Complete removal of Twitter/X API integration
- Removed Twitter client initialization and usage
- Removed Twitter-related configuration settings
- Removed Twitter dependency from requirements

**Why:**
- Simplified data sources to focus on web-based sentiment analysis
- Reduced external API dependencies and associated costs
- Streamlined service architecture to rely solely on DuckDuckGo search

**Files affected:**
- `app/config.py` - Removed `twitter_api_key` and `twitter_api_key_secret` settings
- `app/config.py` - Removed `max_twitter_results` setting
- `app/config.py` - Increased `max_duckduckgo_results` from 20 to 50 to compensate
- `app/api.py` - Removed Twitter client import and initialization
- `app/api.py` - Removed Twitter data fetching logic from sentiment analysis endpoint
- `app/api.py` - Updated error handling to reflect single data source
- `app/schemas.py` - Removed `twitter` field from `SourceCounts` model
- `requirements.txt` - Removed `tweepy==4.14.0` dependency
- `.env` - Removed Twitter API key entries (cleaned up formatting)

**Note**: The file `services/twitter_client.py` still exists but is no longer used. It can be safely deleted if desired.

## API Changes

### Response Format Update
The `/sentiment` endpoint response now only includes web sources:

**Before:**
```json
{
  "sources": {
    "twitter": 50,
    "web": 20
  }
}
```

**After:**
```json
{
  "sources": {
    "web": 50
  }
}
```

## Configuration Changes

### Environment Variables
Removed:
- `TWITTER_API_KEY`
- `TWITTER_API_KEY_SECRET`

Retained:
- `DUCKDUCKGO_API_KEY`
- `GEMINI_API_KEY`

### Settings
- `gemini_model`: `gemini-2.0-flash-exp` → `gemini-1.5-flash`
- `max_duckduckgo_results`: 20 → 50
- Removed: `max_twitter_results`
- Removed: `twitter_api_key`
- Removed: `twitter_api_key_secret`

## Migration Notes

If upgrading from v0.1:
1. Remove Twitter API keys from your `.env` file
2. Run `pip install -r requirements.txt` to ensure correct dependencies
3. The service will now rely solely on DuckDuckGo for data fetching
4. Expect higher web result counts (up to 50 instead of 20)

## Technical Debt

- Consider removing `services/twitter_client.py` file if no longer needed
- May want to add additional data sources to diversify sentiment analysis
